let welcomeScreenLoad=document.querySelector(".welcomeScreen__load"),loadingLine=document.querySelector(".welcomeScreen__line"),welcomeScreen=document.querySelector(".welcomeScreen"),startGameBtn=document.querySelector(".gameDescription__startGame"),gameDescription=document.querySelector(".gameDescription"),gameContent=document.querySelector(".gameBoard__content"),city=document.querySelector(".gameBoard__city"),coordinates=document.querySelector(".gameBoard__target"),playerForce=document.querySelector(".gameBoard__playerForce"),enemyForce=document.querySelector(".gameBoard__enemyForce"),armyOfEnemy=document.querySelector(".gameBoard__armyOfEnemy"),basicMode=document.querySelector(".gameDescription__basic"),expandMode=document.querySelector(".gameDescription__expand"),summaryGame=document.querySelector(".gameBoard__message"),gameResult=document.querySelector(".gameBoard__result"),newGame=document.querySelector(".gameBoard__newGame"),label=document.querySelector(".gameBoard__label"),checkMode=document.querySelector("input"),xCoordinatesArray=(startGameBtn.disabled=!0,[1,2,3,4,5,6,7,8,9,10]),yCoordinatesArray=["A","B","C","D"],numberOfBoxes=xCoordinatesArray.length*yCoordinatesArray.length,mainCounter=0,enemyNumbers=[],clickedBox=[],newMode,numberOfWins=0,numberOfLoses=0,actualWidthOfArmy=parseInt(getComputedStyle(armyOfEnemy).width),actualUnitOfArmy=actualWidthOfArmy/(xCoordinatesArray.length*yCoordinatesArray.length/2),widthOfCity=parseInt(getComputedStyle(city).width),heightOfCity=parseInt(getComputedStyle(city).height),actualWidthOfTheCity,actualHeightOfTheCity,flag=!1,isMobile;function createCityBoxes(){let t=1,n=0,o=0;for(;t<=numberOfBoxes;){let e=document.createElement("div");e.setAttribute("id",t),t++,e.setAttribute("class","gameBoard__cityBox"),e.setAttribute("coordinate",yCoordinatesArray[o]+xCoordinatesArray[n]),++n==xCoordinatesArray.length&&(o++,n=0),city.appendChild(e)}}function choiceEnemyCoordinate(){numOfEnemy=Math.floor(Math.random()*numberOfBoxes+1);for(let e=0;e<enemyNumbers.length;e++)if(numOfEnemy===enemyNumbers[e])return choiceEnemyCoordinate();for(let e=0;e<clickedBox.length;e++)if(numOfEnemy===clickedBox[e])return choiceEnemyCoordinate();enemyNumbers.push(numOfEnemy);let e=document.getElementById(numOfEnemy);hidingCoordinates(e.getAttribute("coordinate"))}function hidingCoordinates(e){num=Math.round(Math.random()),expandMode.classList.contains("choiced")||checkMode.checked&&"podstawowy"==newMode?0==num?coordinates.textContent=e[0]+"?":1==num&&(2==e.length?coordinates.textContent="?"+e[1]:3==e.length&&(coordinates.textContent="?"+e.slice(1,3))):(basicMode.classList.contains("choiced")||checkMode.checked&&"rozszerzony"==newMode)&&(2==e.length?coordinates.textContent="?"+e[1]:3==e.length&&(coordinates.textContent="?"+e.slice(1,3)))}function makeAtack(e,t){let n=document.createElement("img"),o=(n.setAttribute("src","bomb.png"),e.appendChild(n),document.createElement("p"));o.textContent=t,o.style.visibility="hidden",e.appendChild(o)}function getEnemyBoxId(e){var t;mainCounter<numberOfBoxes/2&&0==e.classList.contains("clicked")&&(boxId=parseInt(e.getAttribute("id")),clickedBox.push(boxId),e.classList.add("clicked"),numOfEnemy==boxId?(makeAtack(e,"Trafiony"),chanegWidthElement(enemyForce),numberOfWins++):(makeAtack(e,"Skucha"),chanegWidthElement(playerForce),numberOfLoses++),setTimeout(()=>{choiceEnemyCoordinate()},1400),mainCounter++),mainCounter==numberOfBoxes/2&&(summaryGame.classList.remove("visible"),e=parseInt(getComputedStyle(playerForce).width),t=parseInt(getComputedStyle(enemyForce).width),gameResult.textContent=t<e?"Gratulacje !!!! Wygrałeś":e<t?"Niestety. Przegrałeś":"Remis.",checkMode.checked=!1,label.textContent="Zmień tryb na "+newMode)}function chanegWidthElement(e){var t=parseInt(getComputedStyle(e).width);t>actualUnitOfArmy?e.style.width=t-actualUnitOfArmy+"px":e.style.width="0px"}isMobile=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),closeWelcomeScreen(),createCityBoxes();let boxes=document.querySelectorAll(".gameBoard__cityBox");function choicedMode(e,t,n){t.classList.contains("choiced")&&t.classList.remove("choiced"),e.classList.add("choiced"),newMode=n,startGameBtn.disabled=!1}function beginNewGame(){summaryGame.classList.add("visible"),mainCounter=0,enemyNumbers=[],clickedBox=[],numberOfLoses=0,numberOfWins=0,playerForce.style.width=actualWidthOfArmy+"px",enemyForce.style.width=actualWidthOfArmy+"px",boxes.forEach(e=>{for(e.classList.remove("clicked");e.firstChild;)e.removeChild(e.firstChild)}),choiceEnemyCoordinate()}function closeWindow(e){e.classList.add("visible")}function closeWelcomeScreen(){let t=parseInt(getComputedStyle(welcomeScreenLoad).width),n=setInterval(()=>{var e=parseInt(getComputedStyle(loadingLine).width);e<t?loadingLine.style.width=e+1+"px":(clearInterval(n),closeWindow(welcomeScreen),loadingLine.style.display="None")},1)}boxes.forEach(e=>{e.addEventListener("click",()=>getEnemyBoxId(e))}),basicMode.addEventListener("click",()=>{choicedMode(basicMode,expandMode,"rozszerzony")}),expandMode.addEventListener("click",()=>{choicedMode(expandMode,basicMode,"podstawowy")}),startGameBtn.addEventListener("click",()=>{closeWindow(gameDescription),choiceEnemyCoordinate()}),newGame.addEventListener("click",beginNewGame),checkMode.addEventListener("change",()=>{basicMode.classList.remove("choiced"),expandMode.classList.remove("choiced"),"podstawowy"==newMode?(basicMode.classList.add("choiced"),newMode="rozszerzony"):"rozszerzony"==newMode&&(expandMode.classList.add("choiced"),newMode="podstawowy")});const canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d");function partOfViewFinder(e,t,n,o){ctx.beginPath(),ctx.moveTo(e,t),ctx.lineTo(n,o),ctx.closePath(),ctx.strokeStyle="lime",ctx.stroke()}function viewFinder(e,t){ctx.beginPath(),ctx.arc(e,t,actualUnitOfArmy,0,2*Math.PI,!0),ctx.lineWidth=5,ctx.strokeStyle="lime",ctx.stroke(),partOfViewFinder(e+actualUnitOfArmy,t,e+1.8*actualUnitOfArmy,t),partOfViewFinder(e-actualUnitOfArmy,t,e-1.8*actualUnitOfArmy,t),partOfViewFinder(e,t+actualUnitOfArmy,e,t+1.8*actualUnitOfArmy),partOfViewFinder(e,t-actualUnitOfArmy,e,t-1.8*actualUnitOfArmy)}canvas.width=widthOfCity,canvas.height=heightOfCity,window.addEventListener("resize",function(e){flag=!0,actualWidthOfTheCity=parseInt(getComputedStyle(city).width),actualHeightOfTheCity=parseInt(getComputedStyle(city).height),actualWidthOfArmy=parseInt(getComputedStyle(armyOfEnemy).width),actualUnitOfArmy=actualWidthOfArmy/(xCoordinatesArray.length*yCoordinatesArray.length/2),canvas.width=actualWidthOfTheCity,canvas.height=actualHeightOfTheCity,playerForce.style.width=actualWidthOfArmy-actualUnitOfArmy*numberOfLoses+"px",enemyForce.style.width=actualWidthOfArmy-actualUnitOfArmy*numberOfWins+"px"}),city.addEventListener("mousemove",e=>{0==isMobile&&(flag?ctx.clearRect(0,0,actualWidthOfTheCity,actualHeightOfTheCity):ctx.clearRect(0,0,widthOfCity,heightOfCity),viewFinder(e.clientX-city.offsetLeft-parseInt(getComputedStyle(gameContent).marginLeft),e.clientY-city.offsetTop-parseInt(getComputedStyle(gameContent).marginTop)))});